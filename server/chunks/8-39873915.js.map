{"version":3,"file":"8-39873915.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/write/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/8.js"],"sourcesContent":["import { r as redirect, f as fail } from \"../../../chunks/index.js\";\nimport axios from \"axios\";\nconst load = async ({ locals }) => {\n  if (!locals.user) {\n    throw redirect(301, \"/\");\n  }\n  const formData = {\n    title: \"\",\n    location: locals.user.location,\n    price: 0,\n    images: [],\n    content: \"\"\n  };\n  return { formData };\n};\nconst actions = {\n  async default({ request, cookies }) {\n    const data = await request.formData();\n    const title = data.get(\"title\");\n    const location = data.get(\"location\");\n    const price = data.get(\"price\");\n    const images = data.get(\"images\");\n    const content = data.get(\"content\");\n    const userId = cookies.get(\"account\");\n    const formData = new FormData();\n    formData.append(\"file\", images);\n    let imgDataUrl;\n    try {\n      const res = await axios.post(\n        `${process.env.VUE_APP_IMAGE_BASE_URL}/post/mayack/${userId}`,\n        formData\n      );\n      imgDataUrl = res.data;\n    } catch (error) {\n      console.error(error);\n    }\n    const sendData = {\n      title,\n      description: content,\n      price,\n      region: location,\n      imagePath: imgDataUrl\n    };\n    let status = true;\n    const headers = {\n      account: userId\n    };\n    try {\n      await axios.post(`${process.env.VUE_APP_API_BASE_URL}/api/posts`, sendData, {\n        headers\n      });\n      status = true;\n    } catch (error) {\n      console.error(error);\n      status = false;\n    }\n    if (status) {\n      return { success: true };\n    } else {\n      console.log(\"fail\");\n      return fail(403, {\n        description: \"post failed\",\n        error: true\n      });\n    }\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/write/_page.server.ts.js';\n\nexport const index = 8;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/write/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/write/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/8.717e263d.js\",\"_app/immutable/chunks/scheduler.a8c18826.js\",\"_app/immutable/chunks/index.f70754c7.js\",\"_app/immutable/chunks/each.e59479a4.js\",\"_app/immutable/chunks/index.3578fc18.js\",\"_app/immutable/chunks/forms.7cf6fc01.js\",\"_app/immutable/chunks/parse.bee59afc.js\",\"_app/immutable/chunks/singletons.3a2bae30.js\",\"_app/immutable/chunks/navigation.e6d5941f.js\",\"_app/immutable/chunks/Modal.33b9a361.js\"];\nexport const stylesheets = [\"_app/immutable/assets/8.f8c0ee74.css\",\"_app/immutable/assets/Modal.843bbf42.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}